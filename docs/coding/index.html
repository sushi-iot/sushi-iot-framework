
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../manual/">
      
      
        <link rel="next" href="../download/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>MicroPython coding - Sushi IoT Framework</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sushi-iot-framework-micropython-interface" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Sushi IoT Framework" class="md-header__button md-logo" aria-label="Sushi IoT Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sushi IoT Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MicroPython coding
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Sushi IoT Framework" class="md-nav__button md-logo" aria-label="Sushi IoT Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sushi IoT Framework
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    MicroPython coding
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    MicroPython coding
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#micropython-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      MicroPython introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MicroPython introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-beginners" class="md-nav__link">
    <span class="md-ellipsis">
      For beginners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-the-board" class="md-nav__link">
    <span class="md-ellipsis">
      Connect to the board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-a-user-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Choose a user interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-run-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Auto run a script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differences-vs-micropython" class="md-nav__link">
    <span class="md-ellipsis">
      Differences vs MicroPython
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Known bugs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sushi-micropython-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Sushi Micropython interface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sushi Micropython interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-module" class="md-nav__link">
    <span class="md-ellipsis">
      CORE MODULE
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORE MODULE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system" class="md-nav__link">
    <span class="md-ellipsis">
      SYSTEM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modem" class="md-nav__link">
    <span class="md-ellipsis">
      MODEM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power" class="md-nav__link">
    <span class="md-ellipsis">
      POWER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#menu" class="md-nav__link">
    <span class="md-ellipsis">
      MENU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpio-sensors" class="md-nav__link">
    <span class="md-ellipsis">
      GPIO &amp; SENSORS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frozen-modules" class="md-nav__link">
    <span class="md-ellipsis">
      FROZEN MODULES
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FROZEN MODULES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sushi_menu-module" class="md-nav__link">
    <span class="md-ellipsis">
      sushi_menu module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#see-here-all-sushi-micropython-examples" class="md-nav__link">
    <span class="md-ellipsis">
      See here all Sushi MicroPython examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../download/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#micropython-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      MicroPython introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MicroPython introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-beginners" class="md-nav__link">
    <span class="md-ellipsis">
      For beginners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-the-board" class="md-nav__link">
    <span class="md-ellipsis">
      Connect to the board
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choose-a-user-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Choose a user interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-run-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Auto run a script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differences-vs-micropython" class="md-nav__link">
    <span class="md-ellipsis">
      Differences vs MicroPython
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Known bugs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sushi-micropython-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Sushi Micropython interface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sushi Micropython interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-module" class="md-nav__link">
    <span class="md-ellipsis">
      CORE MODULE
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORE MODULE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system" class="md-nav__link">
    <span class="md-ellipsis">
      SYSTEM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modem" class="md-nav__link">
    <span class="md-ellipsis">
      MODEM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power" class="md-nav__link">
    <span class="md-ellipsis">
      POWER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#menu" class="md-nav__link">
    <span class="md-ellipsis">
      MENU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpio-sensors" class="md-nav__link">
    <span class="md-ellipsis">
      GPIO &amp; SENSORS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frozen-modules" class="md-nav__link">
    <span class="md-ellipsis">
      FROZEN MODULES
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FROZEN MODULES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sushi_menu-module" class="md-nav__link">
    <span class="md-ellipsis">
      sushi_menu module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#see-here-all-sushi-micropython-examples" class="md-nav__link">
    <span class="md-ellipsis">
      See here all Sushi MicroPython examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="sushi-iot-framework-micropython-interface"><strong>Sushi-IoT-Framework MicroPython interface</strong></h1>
<h2 id="micropython-introduction"><strong>MicroPython introduction</strong></h2>
<p>Sushi-IoT-Framework embeds the great MicroPython project, so you can basically rely on all the MicroPython modules included and available online. That's a lot of stuff.<br />
Here we focus on the most important base concepts and highlight the differences between using standard MicroPython alone or inside Sushi-IoT-Framework. </p>
<hr />
<h3 id="for-beginners"><strong>For beginners</strong></h3>
<p>If you are new to MicroPython development, the advice is follow these steps:</p>
<ol>
<li><a href="#connect-to-the-board">Connect your board</a> with USB cable</li>
<li><a href="#choose-a-user-interface">Choose a user interface</a> for MicroPython scripting</li>
<li>Browse the <a href="https://github.com/sushi-iot/sushi-iot-framework/blob/main/examples">examples</a> section where you can start play with some scripts ready to test and modify.</li>
</ol>
<p><strong>Resources:</strong></p>
<ul>
<li><a href="https://docs.micropython.org/en/latest/esp32/quickref.html">ESP32 MicroPython quick reference</a>, which gives a brief overview of the most common modules on the ESP32 microcontroller.  </li>
<li><a href="#sushi-micropython-interface">Sushi-IoT-Framework MicroPython interface</a></li>
</ul>
<hr />
<h3 id="connect-to-the-board"><strong>Connect to the board</strong></h3>
<p>The first step to start coding is to connect to the MicroPython REPL interface.<br />
There are basically two alternatives to program your scripts on the board:</p>
<ul>
<li>
<p><strong>Connect with USB cable directly to the micro board using the USB/UART REPL interface.</strong><br />
  This is the most common, quick, and reliable solution to program your board. If you have a PC and no problems connecting by cable to the board, this is the best way.</p>
</li>
<li>
<p><strong>Connect via Web interface (WebREPL).</strong><br />
  WebREPL is an alternative. From our tests, it works, <strong>but</strong> there are some issues and aspects to improve before recommending it as the best solution. Even in the MicroPython project, it is still considered experimental.<br />
  The first thing to consider is that every time the board is reset (quite common during script development), the network connection is lost, so you have to wait until it reconnects.<br />
  <!-- UPG: WebREPL improvements are planned in Sushi-IoT-Framework -->
</p>
</li>
</ul>
<p><strong>Big advantages of WebREPL are:</strong></p>
<blockquote>
<ul>
<li>You do not need a cable connection to the device  </li>
<li>Once connected via a browser, you can code from any device, not only from a classic Windows, Linux, or Mac PC</li>
</ul>
</blockquote>
<p>For these reasons, WebREPL will surely be the subject of future improvements.</p>
<hr />
<h3 id="choose-a-user-interface"><strong>Choose a user interface</strong></h3>
<p><em>This section is for those who have no experience with MicroPython</em>  </p>
<p>Once the board is connected to your PC (or theoretically using WebREPL), there are several user interfaces you can use to develop your scripts.<br />
The REPL interface is an interpreter that executes MicroPython commands, so from this interface you can interact with the device.<br />
The MicroPython command set includes commands to save/read files on the device's internal memory, which is managed by a file system accessible from MicroPython.</p>
<p>You could use REPL from any serial terminal that opens the COM port, but interacting at such a low level is not comfortable for development beyond simple tests.  </p>
<p>For this reason, there are utilities that provide a <strong>higher-level interface</strong>, letting you quickly perform tasks such as:</p>
<ul>
<li>Save Python files to the device memory (usually <code>.py</code> files), including:<blockquote>
<ul>
<li>Your application script files  </li>
<li>New classes or MicroPython components to add functionality to the device</li>
</ul>
</blockquote>
</li>
<li>Open and edit files directly on the device</li>
<li>Run the <code>.py</code> scripts in the device</li>
<li>Perform other actions, like restarting the device to test startup behavior after adding auto-run scripts</li>
</ul>
<p>Some common interfaces for MicroPython development include:</p>
<ul>
<li><a href="https://labs.arduino.cc/en/labs/micropython">Arduino Lab for MicroPython</a> – Arduino solution for MicroPython development  </li>
<li><a href="https://thonny.org">Thonny</a> – Simple interface, easy to use even for beginners  </li>
<li><a href="https://docs.micropython.org/en/latest/reference/mpremote.html">mpremote</a> – Command-line tool developed for MicroPython. Great for advanced users who prefer working with their own editor and sending commands from the prompt (Windows) or bash (Linux). Also useful for running scripts directly on the device.</li>
</ul>
<p>It’s up to you which interface to choose. In our examples/tests, we often used <strong>Thonny</strong>.</p>
<hr />
<h3 id="auto-run-a-script"><strong>Auto run a script</strong></h3>
<p>After you develop a script that performs some function, it is typical to want it to run automatically when the device starts.<br />
It is important to know that MicroPython automatically runs two scripts at every boot:</p>
<ul>
<li><strong>boot.py</strong>: typically contains system and hardware initialization commands.  </li>
<li><strong>main.py</strong>: this is the main script executed to run your application. Here is where you put your code or run other ".py" scripts you created.  </li>
</ul>
<p>These two scripts can be placed, like any other ".py" file, into the file system using your favourite MicroPython UI interface.</p>
<hr />
<h3 id="differences-vs-micropython"><strong>Differences vs MicroPython</strong></h3>
<p>Sushi-IoT-Framework manages some system/hardware tasks that in certain cases can conflict with the MicroPython implementation.<br />
The following table highlights some points to consider during MicroPython scripting.  </p>
<p>Even though in the current release of Sushi-IoT-Framework there are some limitations, the roadmap is to remove them in future updates, allowing everything to be managed either by MicroPython or by Sushi-IoT-Framework modules.<br />
This table refers to the latest available version of Sushi-IoT-Framework-MicroPython integration: <a href="https://github.com/sushi-iot/sushi-iot-framework/tree/main/firmware">Sushi-IoT-Framework version</a>.</p>
<table>
<thead>
<tr>
<th>MicroPython module</th>
<th>Status</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC</td>
<td>Disabled. The MicroPython implementation is not compatible with the current Sushi-IoT-Framework ADC management (most recent ESP32 drivers). Activating the ADC module is priority one. <!-- UPGRADE in the meantime <a href="link">Sushi-IoT-Framework-ADC-API</a> is available. --></td>
<td></td>
</tr>
<tr>
<td>Wi-Fi</td>
<td>Disabled</td>
<td>Sushi-IoT-Framework manages Wi-Fi connections with all the most common options. Using MicroPython would cause a conflict.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="known-bugs"><strong>Known bugs</strong></h3>
<p>During MicroPython testing some bugs arose. The plan is to update the embedded MicroPython implementation to remove them.</p>
<p><strong>MicroPython known bugs</strong></p>
<table>
<thead>
<tr>
<th>MicroPython module</th>
<th>Problem</th>
</tr>
</thead>
<tbody>
<tr>
<td>WebREPL</td>
<td>WebREPL is working but it's an experimental feature. During testing, cases were experienced where it completely blocked the microcontroller (requiring a power cycle).</td>
</tr>
<tr>
<td>time</td>
<td><em>time.localtime()</em> function returns the wrong year. Other fields are correct.</td>
</tr>
</tbody>
</table>
<p><a href="mailto:mo.iot.wiz@gmail.com?subject=Issue%20report">Report an issue to mo.iot.wiz@gmail.com</a></p>
<hr />
<h2 id="sushi-micropython-interface"><strong>Sushi Micropython interface</strong></h2>
<p>Sushi-IoT-Framework extend the base MicroPython interface with some modules that let perform quickly certain task.  Over the <a href="../manual/#integrated-tasks-components">system tasks</a> that Sushi-IoT-Framework integrates these MicroPython modules are another advantage that let speed up your development, simplying to the minimum the complexity to perform certain operation.
For example with just some line of code you can do operations like:</p>
<ul>
<li>send / receive an SMS to perform an operation remotely like switch on/off a light</li>
<li>integrate the user interface menu to let manage a control locally on the device interface</li>
</ul>
<p>The MicroPython modules embedded in Sushi-IoT-Framework are 2 types:</p>
<ul>
<li>Sushi core module. The core of Sushi-IoT-Framework MicroPython interface, this module is developed in background in C language and include all Sushi-IoT-Framework MicroPython extensions.</li>
<li>Extension modules. These are classic ".py" modules embedded into Sushi-IoT-Framework (called <em>frozen</em> modules) firmware and uses in background the Sushi core module to perform the most common operations in the <em>simpler way possible</em>.  This is because sometimes use directly the Sushi MicroPython module can be a little more tricky.</li>
</ul>
<hr />
<h3 id="core-module">CORE MODULE</h3>
<p>This module is the core of Sushi-IoT-Framework MicroPython interface, is developed in background in C language and include all Sushi-IoT-Framework MicroPython extensions.</p>
<pre><code class="language-python">import sushi
sushi.help()    #Show quick reference
</code></pre>
<p><strong><em>sushi</em></strong> module has one main function <strong><em>cmd</em></strong>:</p>
<pre><code class="language-python">sushi.cmd(command , params)
</code></pre>
<p>All sushi.cmd("command",...) return a tuple: (<code>err</code>:int, <code>result</code>:var)<br />
<code>err</code> = 0   =&gt; OK, <code>result</code> contains the command-specific value<br />
<code>err</code> != 0  =&gt; ERROR, <code>result</code> contains the error message (str)  </p>
<h4 id="system">SYSTEM</h4>
<ul>
<li><code>sushi.cmd("ver")</code> -&gt; str<br />
  Show the firmware version of the board  </li>
<li><code>sushi.cmd("restart" [, delay_ms:int=2000])</code> -&gt; none<br />
  Restart the board after the optional delay in milliseconds  </li>
<li><code>sushi.cmd("set_log", level:int [0=disable,1=enable,255=extended])</code> -&gt; none<br />
  Enable or disable REPL logging  </li>
<li><code>sushi.cmd("register", code:str)</code> -&gt; none<br />
  Register the device with a unique 64-character code  </li>
<li><code>sushi.cmd("factory_reset")</code> -&gt; none<br />
  Restore factory default settings  </li>
</ul>
<h4 id="modem">MODEM</h4>
<ul>
<li>
<p><code>sushi.cmd("set_modem_hnd", callback:func)</code> -&gt; none<br />
  Set a callback to handle modem events.<br />
<code>callback</code> args (a:tuple):<br />
    a[0] = event type [0=SMS received, 1=Incoming call, 2=SMS TX result]<br />
    a[1..] = event-specific data  </p>
<ul>
<li>if a[0] = 0 → (call_number:str, sms_text:str, time:str)  </li>
<li>if a[0] = 1 → (call_number:str)  </li>
<li>if a[0] = 2 → (id:int, tx_result:int [1=OK, 0=ERROR])  </li>
</ul>
</li>
<li>
<p><code>sushi.cmd("send_sms", (text:str, number:str))</code> -&gt; int<br />
  Send an SMS message; returns the SMS ID if command accepted  </p>
</li>
</ul>
<h4 id="power">POWER</h4>
<ul>
<li><code>sushi.cmd("read_power_state")</code> -&gt; int [1=ON, 0=OFF]<br />
  Get the main power state  </li>
<li><code>sushi.cmd("read_power_voltage")</code> -&gt; float (V)<br />
  Read the main power voltage  </li>
<li><code>sushi.cmd("read_batt_level")</code> -&gt; float (%)<br />
  Get the battery level in percent  </li>
<li><code>sushi.cmd("read_batt_voltage")</code> -&gt; float (V)<br />
  Read the battery voltage  </li>
</ul>
<h4 id="menu">MENU</h4>
<p><em>! before use this interface see frozen module <code>sushi_menu</code></em></p>
<ul>
<li><code>sushi.cmd("new_menu", title:str)</code> -&gt; int (menu_id)<br />
  Create a new menu with the given title  </li>
<li><code>sushi.cmd("new_menu_item_string", (desc:str, print_cb:func))</code> -&gt; int (entry_id)<br />
  Create a new string menu item with a callback for printing  </li>
<li><code>sushi.cmd("new_menu_item_edit_list", (desc:str, changed_cb:func, init_index:int, val1:str, val2:str, ...))</code> -&gt; int (entry_id)<br />
  Create a new editable list menu item with initial value and change callback  </li>
<li><code>sushi.cmd("add_entry_to_menu", (menu_id:int, entry_id:int))</code> -&gt; none<br />
  Add an entry to the specified menu  </li>
</ul>
<h4 id="gpio-sensors">GPIO &amp; SENSORS</h4>
<ul>
<li><code>sushi.cmd("read_temperature", sensor:int [0=DS18B20-1,1=DS18B20-2])</code> -&gt; float (°C)<br />
  Read temperature from the selected sensor  </li>
<li><code>sushi.cmd("read_gpin", source:int [0=IO-Expander])</code> -&gt; int (status)<br />
  Read digital input from the specified source  </li>
<li><code>sushi.cmd("set_gpin_int", callback:func)</code> -&gt; none<br />
  Set a callback to detect changes in input state<br />
  args (a:tuple)<br />
<code>callback</code> args (source:int [0 = IO-Expander])  </li>
</ul>
<h3 id="frozen-modules">FROZEN MODULES</h3>
<h4 id="sushi_menu-module"><strong><em>sushi_menu</em></strong> module</h4>
<p>Simplified user menu management: this module expose a class that can be used to integrate custom menu into the system.  </p>
<p>Usage:  </p>
<pre><code class="language-python">import sushi_menu
sushi_menu.help()
</code></pre>
<pre><code class="language-python">from sushi_menu import Submenu
# Add a menu to the on-device interface
mymenu = Submenu('Test Menu')

# Add an entry to the menu
mymenu.add_read_only_item(&quot;Test entry&quot; , ...)
</code></pre>
<ul>
<li><a href="https://github.com/sushi-iot/sushi-iot-framework/blob/main/modules/sushi_menu.py">Module Source code and DOC</a></li>
<li><a href="https://github.com/sushi-iot/sushi-iot-framework/blob/main/examples/menu_example.py">Full example</a></li>
</ul>
<h2 id="examples"><strong>Examples</strong></h2>
<h3 id="see-here-all-sushi-micropython-examples"><a href="https://github.com/sushi-iot/sushi-iot-framework/blob/main/examples">See here all Sushi MicroPython examples</a></h3>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>