
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../manual/">
      
      
        <link rel="next" href="../download/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>API reference - Sushi IoT Framework</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sushi-iot-framework-micropython-api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Sushi IoT Framework" class="md-header__button md-logo" aria-label="Sushi IoT Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sushi IoT Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API reference
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Sushi IoT Framework" class="md-nav__button md-logo" aria-label="Sushi IoT Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sushi IoT Framework
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#micropython" class="md-nav__link">
    <span class="md-ellipsis">
      MicroPython
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MicroPython">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auto-run-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Auto run a script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differences-vs-micropython" class="md-nav__link">
    <span class="md-ellipsis">
      Differences vs MicroPython
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Known bugs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sushi-embedded-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Sushi embedded modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sushi embedded modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-module" class="md-nav__link">
    <span class="md-ellipsis">
      Core module
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#params" class="md-nav__link">
    <span class="md-ellipsis">
      Params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return" class="md-nav__link">
    <span class="md-ellipsis">
      Return
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-commands" class="md-nav__link">
    <span class="md-ellipsis">
      System commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modem-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Modem commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power-management-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Power management commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpio-sensors-commands" class="md-nav__link">
    <span class="md-ellipsis">
      GPIO &amp; sensors commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#menu-commands" class="md-nav__link">
    <span class="md-ellipsis">
      MENU commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Extension modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sushi_menu-module" class="md-nav__link">
    <span class="md-ellipsis">
      'sushi_menu' module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../download/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#micropython" class="md-nav__link">
    <span class="md-ellipsis">
      MicroPython
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MicroPython">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auto-run-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Auto run a script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differences-vs-micropython" class="md-nav__link">
    <span class="md-ellipsis">
      Differences vs MicroPython
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Known bugs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sushi-embedded-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Sushi embedded modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sushi embedded modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-module" class="md-nav__link">
    <span class="md-ellipsis">
      Core module
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#params" class="md-nav__link">
    <span class="md-ellipsis">
      Params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return" class="md-nav__link">
    <span class="md-ellipsis">
      Return
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-commands" class="md-nav__link">
    <span class="md-ellipsis">
      System commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modem-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Modem commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power-management-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Power management commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpio-sensors-commands" class="md-nav__link">
    <span class="md-ellipsis">
      GPIO &amp; sensors commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#menu-commands" class="md-nav__link">
    <span class="md-ellipsis">
      MENU commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Extension modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sushi_menu-module" class="md-nav__link">
    <span class="md-ellipsis">
      'sushi_menu' module
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="sushi-iot-framework-micropython-api-reference"><strong>Sushi-IoT-Framework MicroPython API Reference</strong></h1>
<p>If you are new to MicroPython development, the advice is to check the <a href="../manual/#coding">manual coding section</a>, then start from the examples section where you can find some ready-to-use scripts to test and modify.</p>
<hr />
<h2 id="micropython"><strong>MicroPython</strong></h2>
<p>Sushi-IoT-Framework embeds the great MicroPython project, so you can basically rely on all the MicroPython modules included and available online. That's a lot of stuff.<br />
A good starting point for ESP32 is the <a href="https://docs.micropython.org/en/latest/esp32/quickref.html">ESP32 MicroPython quick reference</a>, which gives a brief overview of the most common modules on the ESP32 microcontroller.<br />
In all coding examples we also use many standard MicroPython interfaces and modules. These modules are not deeply documented in this reference since you can find all the details in other online resources that focus on MicroPython firmware development.<br />
Here we focus only on the most important base concepts and highlight the differences between using standard MicroPython alone or inside Sushi-IoT-Framework. </p>
<hr />
<h3 id="auto-run-a-script"><strong>Auto run a script</strong></h3>
<p>After you develop a script that performs some function, it is typical to want it to run automatically when the device starts.<br />
It is important to know that MicroPython automatically runs two scripts at every boot:</p>
<ul>
<li><strong>boot.py</strong>: typically contains system and hardware initialization commands.  </li>
<li><strong>main.py</strong>: this is the main script executed to run your application. Here is where you put your code or run other ".py" scripts you created.  </li>
</ul>
<p>These two scripts can be placed, like any other ".py" file, into the file system using your favourite MicroPython UI interface.</p>
<hr />
<h3 id="differences-vs-micropython"><strong>Differences vs MicroPython</strong></h3>
<p>Sushi-IoT-Framework manages some system/hardware tasks that in certain cases can conflict with the MicroPython implementation.<br />
The following table highlights some points to consider during MicroPython scripting.  </p>
<p>Even though in the current release of Sushi-IoT-Framework there are some limitations, the roadmap is to remove them in future updates, allowing everything to be managed either by MicroPython or by Sushi-IoT-Framework modules.<br />
This table refers to the latest available version of Sushi-IoT-Framework-MicroPython integration: <a href="../manual/#versions">Sushi-IoT-Framework version</a>.</p>
<table>
<thead>
<tr>
<th>MicroPython module</th>
<th>Status</th>
<th>Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADC</td>
<td>Disabled. The MicroPython implementation is not compatible with the current Sushi-IoT-Framework ADC management (most recent ESP32 drivers). Activating the ADC module is priority one. <!-- UPGRADE in the meantime <a href="link">Sushi-IoT-Framework-ADC-API</a> is available. --></td>
<td></td>
</tr>
<tr>
<td>Wi-Fi</td>
<td>Disabled</td>
<td>Sushi-IoT-Framework manages Wi-Fi connections with all the most common options. Using MicroPython would cause a conflict.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="known-bugs"><strong>Known bugs</strong></h3>
<p>During MicroPython testing some bugs arose. The plan is to update the embedded MicroPython implementation to remove them.</p>
<p><strong>MicroPython known bugs</strong>
| MicroPython module | Problem |
|---|---|
| WebREPL | WebREPL is working but it's an experimental feature. During testing, cases were experienced where it completely blocked the microcontroller (requiring a power cycle). |
| time | <em>time.localtime()</em> function returns the wrong year. Other fields are correct. |</p>
<p><a href="mailto:mo.iot.wiz@gmail.com?subject=Issue%20report">Report an issue to mo.iot.wiz@gmail.com</a></p>
<hr />
<h2 id="sushi-embedded-modules"><strong>Sushi embedded modules</strong></h2>
<p>Sushi-IoT-Framework extend the base MicroPython interface with some modules that let perform quickly certain task.  Over the <a href="../manual/#integrated-tasks-components">system tasks</a> that Sushi-IoT-Framework integrates these MicroPython modules are another advantage that let speed up your development, simplying to the minimum the complexity to perform certain operation.
For example with just some line of code you can do operations like:</p>
<ul>
<li>send / receive an SMS to perform an operation remotely like switch on/off a light</li>
<li>integrate the user interface menu to let manage a control locally on the device interface</li>
</ul>
<p>The MicroPython modules embedded in Sushi-IoT-Framework are 2 types:</p>
<ul>
<li><a href="#sushi-module">Sushi core module</a>. The core of Sushi-IoT-Framework MicroPython interface, this module is developed in background in C language and include all Sushi-IoT-Framework MicroPython extensions.</li>
<li><a href="#extension-modules">Extension modules</a>. These are classic ".py" modules embedded into Sushi-IoT-Framework firmware and uses in background the Sushi core module to perform the most common operations in the <em>simpler way possible</em>.  This is because sometimes use directly the Sushi MicroPython module can be a little more tricky.</li>
</ul>
<hr />
<h3 id="core-module">Core module</h3>
<p>This module is the core of Sushi-IoT-Framework MicroPython interface, is developed in background in C language and include all Sushi-IoT-Framework MicroPython extensions.</p>
<pre><code class="language-python">import sushi
</code></pre>
<p><strong><em>sushi</em></strong> module has one main function <strong><em>cmd</em></strong>:</p>
<pre><code class="language-python">sushi.cmd(command , params)
</code></pre>
<hr />
<h4 id="params"><strong>Params</strong></h4>
<ul>
<li><em>command</em> (str) : command to be executed</li>
<li><em>params</em> (variable) : optional params depending on "command* (see the table below)</li>
</ul>
<hr />
<h4 id="return"><strong>Return</strong></h4>
<p>Return a tuple: (error , reply)</p>
<ul>
<li><em>error</em> (int) : error code. If 0 no error.</li>
<li><em>reply</em> (variable) : specific answer depending on <em>command</em> (if any) or generic ACK/ERROR message.</li>
</ul>
<hr />
<h4 id="system-commands"><strong>System commands</strong></h4>
<table>
<thead>
<tr>
<th><em>command</em></th>
<th><em>notes</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>help</em></td>
<td>Show help<br>&bull;<em>params</em>: none<br>&bull;<em>reply</em>: HELP_TEXT(str)<br>&bull;<em>Example</em>:sushi.cmd("help")</td>
</tr>
<tr>
<td><em>ver</em></td>
<td>Get version<br>&bull;<em>params</em>: none<br>&bull;<em>reply</em>: VERSION(str)<br>&bull;<em>Example</em>:sushi.cmd("ver")</td>
</tr>
<tr>
<td><em>restart</em></td>
<td>Restart device<br>&bull;<em>params</em>: DELAY_ms(int) : OPTIONAL, default:2000<br>&bull;<em>reply</em>:generic ACK/ERROR<br>&bull;<em>Example</em>:sushi.cmd("restart" , 2500)</td>
</tr>
<tr>
<td><em>set_log</em></td>
<td>Enable the LOG on REPL<br>&bull;<em>params</em>: LOG_LEVEL(int) : 0 = disable , 1 = enable , 255 = extended<br>&bull;<em>reply</em>:generic ACK/ERROR<br>&bull;<em>Example</em>:sushi.cmd("set_log" , 1)</td>
</tr>
<tr>
<td><em>factory_reset</em></td>
<td>Reset to the default factory configuration<br>&bull;<em>params</em>: none<br>&bull;<em>reply</em>:generic ACK/ERROR<br>&bull;<em>Example</em>:sushi.cmd("factory_reset")</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="modem-commands"><strong>Modem commands</strong></h4>
<table>
<thead>
<tr>
<th><em>command</em></th>
<th><em>notes</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>send_sms</em></td>
<td>Send a SMS<br>&bull;<em>params</em>: tuple(TEXT(str) , NUMBER(str))<br>&bull;<em>reply</em>: SMS_ID(int)  <br>&bull;<em>Example</em>: sushi.cmd("send_sms" , ("hello !" , "+39339535xxxx" ) )</td>
</tr>
<tr>
<td><em>set_modem_hnd</em></td>
<td>Set modem events callback handler<br>&bull;<em>params</em>: MODEM_CALLBACK(func)<br>MODEM_CALLBACK (ARGS(tuple)) : callback function called when an even occurs, pass 1 tuble parameter "ARGS":<br>* ARGS[0] (int) : event type [0 = SMS received ; 1 = incoming call ; 2 = SMS TX result]  <br>* ARGS[1..N] : event specific data<br>- if ARGS[0] = 0 :  call_number(str), sms_text(str) , time(str)  <br>- if ARGS[0] = 1 :  call_number(str)  <br>- if ARGS[0] = 2 :  id(int) , tx_result(int) [1 = OK ; 0 = ERROR]<br>&bull;<em>reply</em>: generic ACK/ERROR<br>&bull;<em>Example</em>:see <a href="#examples">Sushi-IoT-Framework examples</a>. <!--UPG:link esempio eventi modem--></td>
</tr>
</tbody>
</table>
<!--UPGRADE (non hanno senso con gestione automatica. Se si permette disattivazione gestione automatica allora bisogna leggere e cancellare)
|*read_sms*|Read a SMS from SIM<br>&bull;*params*: index(int) : 0...N<br>&bull;*reply*: tuple(number(str) , text(str))<br>Return ERROR if index do not exists in SIM memory  | sushi.cmd("read_sms" , 1 )
|*del_sms*|Erase an SMS from SIM<br>&bull;*params*: index(int) : 0...N<br>&bull;*reply*: generic ACK/ERROR  | sushi.cmd("del_sms" , 1 )
inconming_call_callback (modem deve supportare chiamate entrata)
-->
<hr />
<h4 id="power-management-commands"><strong>Power management commands</strong></h4>
<table>
<thead>
<tr>
<th><em>command</em></th>
<th><em>notes</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>read_power_state</em></td>
<td>Get main power state<br>&bull;<em>params</em>: none<br>&bull;<em>reply</em>: STATE(int) [1 = ON ; 0 = OFF]  <br>&bull;<em>Example</em>: sushi.cmd("read_power_state")</td>
</tr>
<tr>
<td><em>read_power_voltage</em></td>
<td>Get main power voltage<br>&bull;<em>params</em>: none<br>&bull;<em>reply</em>: VOLTS(float)  <br>&bull;<em>Example</em>: sushi.cmd("read_power_voltage")</td>
</tr>
<tr>
<td><em>read_batt_level</em></td>
<td>Get battery level<br>&bull;<em>params</em>: none<br>&bull;<em>reply</em>: PERCENTAGE(float)  <br>&bull;<em>Example</em>: sushi.cmd("read_batt_level")</td>
</tr>
<tr>
<td><em>read_batt_voltage</em></td>
<td>Get battery voltage<br>&bull;<em>params</em>: none<br>&bull;<em>reply</em>: VOLTS(float)  <br>&bull;<em>Example</em>: sushi.cmd("read_batt_voltage")</td>
</tr>
</tbody>
</table>
<h4 id="gpio-sensors-commands"><strong>GPIO &amp; sensors commands</strong></h4>
<table>
<thead>
<tr>
<th><em>command</em></th>
<th><em>notes</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>read_temperature</em></td>
<td>Get temperature<br>&bull;<em>params</em>: SENSOR(int) [0=DS18B20-1 ; 1=DS18B20-2]<br>&bull;<em>reply</em>: TEMPERATURE(float)  <br>&bull;<em>Example</em>: sushi.cmd("read_temperature" , 0)</td>
</tr>
<tr>
<td><em>read_gpin</em></td>
<td>Read input from IO expander<br>&bull;<em>params</em>: SOURCE(int) [0=IO-Expander]<br>&bull;<em>reply</em>: STATUS(int). Each bit of the integer represents the state of an input.<br>&bull;<em>Example</em>: sushi.cmd("read_gpin" , 0)</td>
</tr>
<tr>
<td><em>set_gpin_int</em></td>
<td>Set input change interrupt<br>&bull;<em>params</em>: INTERRUPT_CALLBACK(func)<br>INTERRUPT_CALLBACK (ID(int)) : callback function called when input state change<br>* ID (int) : source [0 = IO-Expander]<br>&bull;<em>reply</em>: generic ACK/ERROR<br>&bull;<em>Example</em>: sushi.cmd("set_gpin_int" , interrupt_handler)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="menu-commands"><strong>MENU commands</strong></h4>
<p>Before use this set of commands check the <a href="#sushi_menu-module">sushi_menu module</a> that has an higher level simpler interace.
Examples : see <a href="#sushi_menu-module">sushi_menu module</a>.</p>
<table>
<thead>
<tr>
<th><em>command</em></th>
<th><em>notes</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>new_menu</em></td>
<td>Create a new MENU<br>&bull;<em>params</em>:TITLE (str) : menu title<br>&bull;<em>reply</em>: MENU_ID(int)</td>
</tr>
<tr>
<td><em>new_menu_item_string</em></td>
<td>Create a new MENU read-only string item<br>&bull;<em>params</em>:tuple(DESCRIPTION(str) , PRINT_CALLBACK(func))<br>&bull;<em>reply</em>: ENTRY_ID(int)</td>
</tr>
<tr>
<td><em>new_menu_item_edit_list</em></td>
<td>Create a new MENU editable item<br>&bull;<em>params</em>:tuple(DESCRIPTION(str) , CHANGED_CALLBACK(func) , INIT_VALUE_INDEX(int) , VALUE_1(str) , VALUE_2(str), ...)<br>&bull;<em>reply</em>: ENTRY_ID(int)</td>
</tr>
<tr>
<td><em>add_entry_to_menu</em></td>
<td>Add an entry to a MENU<br>&bull;<em>params</em>:tuple(MENU_ID(int) , ENTRY_ID(int))<br>&bull;<em>reply</em>: generic ACK/ERROR</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="extension-modules"><strong>Extension modules</strong></h3>
<p>These modules are classic ".py" files embedded into Sushi-IoT-Framework firmware and uses in background the Sushi core module to perform the most common operations in the <em>simpler way possible</em>.<br />
This is because sometimes use directly the Sushi MicroPython module can be a little more tricky.
Please note that these modules are always present by default but are not visible into the file system.<br />
You can find the source MicroPython code of any embedded module in this DOC and if required do changes: in this case just copy the new modified file into the device file system changing the class name, for example adding "_ext" to the name, to avoid any conflict with the embedded modules.</p>
<hr />
<h4 id="sushi_menu-module"><strong><em>'sushi_menu'</em></strong> module</h4>
<p>This module expose a class that can be used to integrate custom menu into the system.</p>
<pre><code class="language-python">from sushi_menu import Submenu
# Add a menu to the on-device interface
mymenu = Submenu('Test Menu')

# Add an entry to the menu
mymenu.add_read_only_item(&quot;Test entry&quot; , ...)
</code></pre>
<ul>
<li><a href="https://github.com/sushi-iot/sushi-iot-framework/blob/main/modules/sushi_menu.py">Module Source code and DOC</a></li>
<li><a href="https://github.com/sushi-iot/sushi-iot-framework/blob/main/examples/menu_example.py">Full example</a></li>
</ul>
<!-- UPG #### ***'sushi_modem'*** module -->

<hr />
<h2 id="examples"><strong>Examples</strong></h2>
<ul>
<li><a href="https://github.com/sushi-iot/sushi-iot-framework/blob/main/examples/menu_example.py">Manage relays with custom menu</a></li>
</ul>
<!-- UPGRADE: sezione con progetti completi
---
## **Projects**
//.... 
-->












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>